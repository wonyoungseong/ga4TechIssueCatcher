# Story 5.1: Slack Webhook Alert Dispatch

## Status

Approved

## Story

**As a** 디지털 애널리틱스 팀원,
**I want** 검증 실패 시 Slack으로 알림을 받기를 원합니다,
**so that** 이슈를 즉시 인지하고 대응할 수 있습니다.

## Acceptance Criteria

1. Slack Webhook URL을 환경변수에서 로드한다
2. 측정 ID 불일치 시 Slack 알림을 발송한다
3. GTM ID 불일치 시 Slack 알림을 발송한다
4. page_view 미발생 시 Slack 알림을 발송한다
5. 알림은 즉시 발송되며, 배치 처리로 인한 지연이 없다
6. Slack 발송 실패 시 에러 로그를 기록하지만 검증은 계속 진행한다

## Tasks / Subtasks

- [ ] Implement Slack webhook integration (AC: 1)
  - [ ] Create `sendSlackAlert()` function in `resultStorage` module
  - [ ] Load `SLACK_WEBHOOK_URL` from environment
  - [ ] Use `node-fetch` for HTTP POST requests

- [ ] Implement issue detection (AC: 2, 3, 4)
  - [ ] Check if `result.issues.length > 0`
  - [ ] Only send alert if issues exist
  - [ ] Skip alert for successful validations

- [ ] Implement immediate dispatch (AC: 5)
  - [ ] Send alert immediately after validation
  - [ ] No batching or queuing
  - [ ] Use async/await for non-blocking

- [ ] Add error handling (AC: 6)
  - [ ] Wrap in try-catch
  - [ ] Log Slack errors
  - [ ] Return gracefully on failure
  - [ ] Don't block validation

## Dev Notes

**Module**: `resultStorage`
**Function**: `sendSlackAlert(result)`
**Environment**: `SLACK_WEBHOOK_URL`
**Library**: `node-fetch` ^3.3.0

**Implementation** (see Epic 5 for full code)

**Integration Points**:
- Called by: `orchestrator` after property validation
- Input: ValidationResult object
- Condition: Only if issues exist

### Testing

**Test Location**: `test/modules/resultStorage.test.js`

**Testing Standards**:
- Test Slack alert sent for issues
- Test no alert for successful validations
- Test error handling for webhook failure
- Manual test: Verify alert received in Slack

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-29 | 1.0 | Initial story creation from Epic 5 | Sarah (PO) |
| 2025-01-29 | 1.1 | Story approved and ready for development | Sarah (PO) |

## Dev Agent Record

(To be filled by dev agent)

## QA Results

(To be filled by QA agent)
