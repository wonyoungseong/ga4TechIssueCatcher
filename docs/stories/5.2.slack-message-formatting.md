# Story 5.2: Slack Alert Message Formatting

## Status

Approved

## Story

**As a** ë””ì§€í„¸ ì• ë„ë¦¬í‹±ìŠ¤ íŒ€ì›,
**I want** Slack ì•Œë¦¼ì— í•„ìš”í•œ ì •ë³´ê°€ í¬í•¨ë˜ê¸°ë¥¼ ì›í•©ë‹ˆë‹¤,
**so that** ì•Œë¦¼ë§Œìœ¼ë¡œë„ ë¬¸ì œ ìƒí™©ì„ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## Acceptance Criteria

1. ì•Œë¦¼ì— ì†ì„±ëª…ì„ í¬í•¨í•œë‹¤
2. ì•Œë¦¼ì— ì´ìŠˆ ìœ í˜•(ì¸¡ì • ID ë¶ˆì¼ì¹˜, GTM ID ë¶ˆì¼ì¹˜ ë“±)ì„ í¬í•¨í•œë‹¤
3. ì•Œë¦¼ì— ê²€ì¦ ì‹œê°„ì„ í¬í•¨í•œë‹¤
4. ì•Œë¦¼ì— ìŠ¤í¬ë¦°ìƒ· íŒŒì¼ ê²½ë¡œë¥¼ í¬í•¨í•œë‹¤
5. ì•Œë¦¼ ë©”ì‹œì§€ëŠ” Slack Markdown í˜•ì‹ìœ¼ë¡œ í¬ë§·íŒ…í•œë‹¤
6. ì¹˜ëª…ì  ì˜¤ë¥˜ ì‹œ `@channel` ë©˜ì…˜ì„ í¬í•¨í•˜ì—¬ ê¸´ê¸‰ ì•Œë¦¼ì„ ë°œì†¡í•œë‹¤

## Tasks / Subtasks

- [ ] Implement message formatting (AC: 1, 2, 3, 4)
  - [ ] Create `formatSlackMessage()` function
  - [ ] Include property name
  - [ ] Include issue types
  - [ ] Include validation timestamp
  - [ ] Include URL and screenshot path

- [ ] Apply Slack Markdown formatting (AC: 5)
  - [ ] Use `*bold*` for headers
  - [ ] Use `` `code` `` for IDs
  - [ ] Add emojis for severity (ğŸš¨, âš ï¸, â„¹ï¸)
  - [ ] Format issue details clearly

- [ ] Add critical alerts (AC: 6)
  - [ ] Check issue severity
  - [ ] Add `<!channel>` for critical issues
  - [ ] Include urgency message

## Dev Notes

**Function**: `formatSlackMessage(result)`
**Markdown**: Slack-specific markdown syntax
**Emojis**: ğŸš¨ (critical), âš ï¸ (warning), â„¹ï¸ (info)

**Message Format** (see Epic 5 for full example)

**Integration Points**:
- Called by: `sendSlackAlert()` function
- Input: ValidationResult object
- Output: Formatted message string

### Testing

**Test Location**: `test/modules/resultStorage.test.js`

**Testing Standards**:
- Test message formatting with all required fields
- Test emoji selection based on severity
- Test @channel mention for critical issues
- Test markdown rendering
- Manual test: Verify formatting in Slack

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-29 | 1.0 | Initial story creation from Epic 5 | Sarah (PO) |
| 2025-01-29 | 1.1 | Story approved and ready for development | Sarah (PO) |

## Dev Agent Record

(To be filled by dev agent)

## QA Results

(To be filled by QA agent)
