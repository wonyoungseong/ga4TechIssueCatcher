# Project Brief: GA4 Tech Issue Catcher

## Executive Summary

**GA4 Tech Issue Catcher**는 Amorepacific의 100개 이상 브랜드 속성(properties)에서 Google Analytics 4(GA4)와 Google Tag Manager(GTM) 구현 상태를 매일 자동으로 검증하는 모니터링 시스템입니다. 시스템은 각 웹사이트를 크롤링하고, GA4 네트워크 이벤트를 캡처하며, 추적 스크립트가 올바르게 구성되어 정확한 측정 ID와 GTM 컨테이너로 데이터를 전송하는지 검증한 후, 검증 결과와 스크린샷을 저장하여 이슈 탐지와 히스토리 추적을 지원합니다.

**주요 해결 과제:** Amorepacific 마케팅 팀은 여러 브랜드와 국가에 걸쳐 100개 이상의 디지털 속성을 관리합니다. 현재 수동 검증에 애널리틱스 팀이 연간 800시간 이상을 소비하고 있습니다. 잘못 구성된 추적은 심각한 데이터 손실로 이어집니다—최근 LANEIGE US에서 발생한 3주간의 설정 오류로 인해 $50K 상당의 광고 비용 추적이 불가능했습니다. 지속적인 배포, A/B 테스트, 다국가 출시로 인해 주간 단위로 설정 변경이 발생하지만, 현재는 문제 발견까지 2-4주가 소요됩니다.

**자체 구축 vs. 구매 이유:** ObservePoint와 같은 상용 솔루션(연간 $25K 이상)은 내부 속성(뷰티엔젤 앱, 옴니회원 플랫폼, 내부 대시보드)에 접근할 수 없으며, Amorepacific의 CSV 기반 속성 관리 워크플로우와 통합되지 않습니다. 자체 솔루션은 엔터프라이즈 라이선스 비용 대비 6개월 내 투자 회수가 가능합니다.

**목표 사용자:**
- **Primary:** 일일 기술 검증 대시보드가 필요한 디지털 애널리틱스 팀 (3명)
- **Secondary:** 이슈 탐지 시 자동 알림을 받는 마케팅 운영팀 및 브랜드 매니저

**핵심 가치 제안:** 매일 자동 검증을 통해 이슈 탐지 시간을 2-4주에서 24시간으로 단축하여 연간 약 $200K 상당의 데이터 손실을 방지하는 동시에 800시간 이상의 수동 검증 작업을 절감합니다. 기술적 실현 가능성은 작동하는 개념 증명 시스템을 통해 검증되었습니다.

---

## Problem Statement

### 현재 상황 및 문제점

Amorepacific은 전 세계 여러 시장에 걸쳐 100개 이상의 디지털 속성을 운영하고 있습니다:
- **이커머스 사이트**: AMOREMALL, INNISFREE, LANEIGE, SULWHASOO 등 (한국, 미국, 일본, 중국, 동남아시아)
- **브랜드 사이트**: ETUDE, HERA, IOPE, RYO, MAMONDE 등 (다국가 버전)
- **Global D2C**: 국가별 이커머스 플랫폼 (SG, TH, VN, HK, MY, TW 등)
- **기타 속성**: 뷰티엔젤 앱, 옴니회원 플랫폼, 뷰티테크 서비스, 내부 대시보드

각 속성은 GA4 측정 ID와 GTM 컨테이너 ID를 통해 사용자 행동과 비즈니스 메트릭을 추적합니다. 그러나 현재 다음과 같은 심각한 문제가 발생하고 있습니다:

**Pain Point 1: 수동 검증의 한계**
- 디지털 애널리틱스 팀(3명)이 100개 이상의 속성을 수동으로 검증
- 각 속성당 평균 검증 시간: 15-20분 (사이트 방문, 개발자 도구 확인, GA4 이벤트 검증)
- 주간 순환 검증 시도: 월요일 10개, 화요일 10개... → 1회 전체 검증에 2주 소요
- **연간 800시간 이상의 수동 작업** (팀원 1명의 50% 업무 시간)

**Pain Point 2: 높은 설정 변경 빈도**
- 지속적인 배포 및 업데이트 (주 2-3회)
- A/B 테스트 및 프로모션 캠페인으로 인한 GTM 태그 수정
- 다국가 동시 출시로 인한 속성 추가 및 변경
- 외부 에이전시 및 개발팀의 코드 변경
- **주간 평균 5-10개 속성에서 설정 변경 발생**

**Pain Point 3: 지연된 문제 발견**
- 현재 시스템: 격주 순환 검증 → 문제 발견까지 평균 **2-4주 소요**
- 데이터 손실 기간이 길어질수록 복구 불가능한 인사이트 증가
- 광고 캠페인 최적화, 전환율 분석, 사용자 여정 추적 등이 왜곡됨

### 문제의 영향 (정량화)

**비즈니스 영향:**
- **2024년 Q2 사례**: LANEIGE US 사이트의 GTM 설정 오류로 3주간 데이터 미수집
  - 손실 데이터: ~15,000 세션, ~$50K 광고 비용의 attribution 불가
  - 영향: Q2 마케팅 ROI 분석 부정확, 광고 예산 최적화 실패
- **2024년 Q3 사례**: INNISFREE JP의 측정 ID 오류로 2주간 잘못된 속성으로 데이터 전송
  - 결과: 일본 시장 성과 보고서 2주 지연, 경영진 보고 신뢰도 하락
- **연간 추정 손실**: 2-3건의 주요 설정 오류 × 평균 $70K 영향 = **약 $200K 데이터 손실 가치**

**운영 영향:**
- 애널리틱스 팀의 800시간/년 소요 (연봉 $80K 기준 약 $38K 인건비)
- 문제 발견 시 긴급 대응으로 인한 팀 생산성 저하
- 이해관계자(브랜드 매니저, 마케팅팀)의 신뢰 감소

### 기존 솔루션의 한계

**1. 상용 모니터링 도구 (ObservePoint, Tealium, Google Tag Assistant)**
- **비용**: 엔터프라이즈 라이선스 연간 $25K-$50K
- **접근 제한**: 내부 전용 속성(뷰티엔젤 앱, 옴니회원 플랫폼, 내부 대시보드)은 외부 SaaS 접근 불가
- **통합 부재**: Amorepacific의 CSV 기반 속성 관리 시스템과 통합되지 않음
- **커스터마이징 불가**: Amorepacific 특화 검증 로직(AP_DATA 환경변수 확인 등) 추가 불가

**2. Google Analytics 실시간 보고서**
- 실시간 이벤트만 확인 가능, 히스토리 추적 불가
- 100개 속성을 매일 수동 확인해야 함 (자동화 없음)
- 측정 ID/GTM ID 일치 여부 등 설정 검증 기능 없음

**3. 사내 수동 체크리스트**
- 스프레드시트 기반 수동 기록
- 확인자 주관에 따라 검증 품질 편차 발생
- 스크린샷 미보관으로 증거 자료 부족
- 확인 누락 및 휴먼 에러 발생

### 지금 해결해야 하는 이유

**1. 비즈니스 크리티컬한 시기**
- 2025년 글로벌 확장 계획: 신규 시장 진출로 속성 수 30% 증가 예상
- 데이터 기반 의사결정 강화: 경영진의 GA4 데이터 의존도 급증
- 개인정보보호 규제 강화: GDPR, CCPA 준수를 위한 정확한 추적 필수

**2. 기술 부채 누적 방지**
- 현재 개념 증명 시스템 존재: 추가 개발로 즉시 활용 가능
- 지금 자동화하지 않으면 속성 증가에 따라 문제 심화
- 수동 검증 인력 추가 채용보다 시스템 구축이 장기적으로 비용 효율적

**3. 경쟁력 확보**
- 디지털 마케팅 선진화: 데이터 품질이 곧 경쟁력
- 빠른 의사결정: 24시간 내 문제 감지로 agile한 대응 가능
- 조직 신뢰도: 안정적인 데이터 인프라로 팀 간 협업 강화

---

## Proposed Solution

### 핵심 컨셉 및 접근법

**GA4 Tech Issue Catcher**는 Playwright 기반의 자동화된 크롤링 시스템으로, CSV 파일에 정의된 모든 디지털 속성을 매일 순회하며 GA4/GTM 설정을 검증하고 결과를 저장합니다.

**핵심 아이디어:**
- **"Set it and forget it" 자동화**: 한 번 설정하면 매일 새벽 자동 실행되어 아침에 결과 확인 가능
- **증거 기반 검증**: 스크린샷과 네트워크 이벤트 데이터를 모두 저장하여 "언제, 무엇이 잘못되었는지" 명확히 추적
- **CSV 중심 설계**: 기존 Amorepacific 워크플로우(CSV로 속성 관리)와 완벽히 통합
- **병렬 처리**: 5개 브라우저 동시 실행으로 100개 속성을 1-2시간 내 검증 완료

### 시스템 동작 원리

**1. CSV 기반 속성 관리**
```
CSV 파일 읽기 → 각 속성의 메타데이터 추출
- 측정 ID (G-XXXXXXXXX)
- GTM 컨테이너 ID (GTM-XXXXXXXX)
- 대표 URL
- 예상 도메인 (whitelist)
```

**2. 자동 크롤링 및 이벤트 캡처**
```
브라우저 풀 생성 (5 concurrent)
→ 각 속성 방문
→ Chrome DevTools Protocol로 네트워크 감청
→ GA4 이벤트 (analytics.google.com/g/collect) 캡처
→ GTM 스크립트 감지
→ AP_DATA 환경변수 추출
```

**3. 설정 검증**
```
캡처된 데이터 vs. CSV 기대값 비교
- 측정 ID 일치 확인
- GTM ID 일치 확인
- page_view 이벤트 발생 확인
- 잘못된 속성으로 전송 여부 확인
```

**4. 결과 저장 및 알림**
```
날짜별 폴더 생성 (YYYY-MM-DD)
→ 스크린샷 저장 (fullPage)
→ JSON 결과 저장 (타임스탬프 포함)
→ 이슈 발견 시 Slack/Email 알림
```

### 기존 솔루션 대비 차별점

**1. 완전 자동화 vs. 반자동 도구**
- 상용 도구: 수동으로 크롤링 트리거 필요, 결과 해석도 수동
- 제안 시스템: cron job으로 매일 자동 실행, 알림 자동 발송

**2. 내부 시스템 접근**
- 상용 도구: VPN/방화벽 내부 시스템 접근 불가
- 제안 시스템: 사내 네트워크에서 실행, 모든 속성 접근 가능

**3. Amorepacific 특화 검증**
- 상용 도구: 범용 GA4 검증만 가능
- 제안 시스템: AP_DATA 환경변수, 브랜드별 특수 로직 등 커스텀 검증 가능

**4. 비용 효율성**
- 상용 도구: $25K-$50K/년 라이선스
- 제안 시스템: 개발 투자 후 운영 비용 최소 (서버 비용 ~$500/년)

### 왜 이 솔루션이 성공할 것인가

**1. 검증된 기술 스택**
- **Playwright**: 안정적인 브라우저 자동화, anti-detection 지원
- **Chrome DevTools Protocol**: GA4 네트워크 이벤트 정확한 캡처
- **Node.js**: 빠른 병렬 처리 및 async 작업 처리

**2. 이미 작동하는 PoC 존재**
- 경로: `/Users/seong-won-yeong/Documents/Project/ga4IssueCatcher/`
- 10개 속성 대상 테스트 완료
- 7개 모듈로 구조화된 코드베이스
- 실제 데이터 캡처 및 검증 성공

**3. 단계적 확장 가능**
- **Phase 1**: 10-20개 주요 속성 모니터링 (1-2주)
- **Phase 2**: 전체 100개 속성으로 확대 (2-3주)
- **Phase 3**: 알림 시스템 및 대시보드 추가 (4주)

**4. 유지보수 최소화 설계**
- CSV 파일만 업데이트하면 새 속성 자동 추가
- 모듈화된 구조로 개별 컴포넌트 독립 수정 가능
- 로그 및 에러 핸들링으로 문제 조기 발견

### 고수준 제품 비전

**단기 목표 (3개월):**
- 100개 모든 속성에 대한 일일 자동 검증
- 이슈 발견 시 Slack 실시간 알림
- 30일 히스토리 대시보드

**중기 목표 (6-12개월):**
- 트렌드 분석: 반복적으로 실패하는 속성 자동 식별
- 예측 알림: 설정 변경 후 예상 이슈 사전 경고
- 다른 팀과 통합: JIRA 티켓 자동 생성

**장기 비전 (1-2년):**
- 멀티 클라우드 지원: AWS, GCP에서 동시 실행으로 지리적 분산 검증
- AI 기반 이상 탐지: 정상 패턴 학습 후 anomaly 자동 발견
- 셀프 서비스 플랫폼: 마케팅 팀이 직접 속성 추가 및 검증 규칙 설정

---

## Target Users

### Primary User Segment: 디지털 애널리틱스 팀

**프로필:**
- **팀 규모**: 3명 (Analytics Manager 1명, Analytics Specialist 2명)
- **역할**: Amorepacific 전체 디지털 속성의 GA4/GTM 관리 및 데이터 품질 보증
- **기술 수준**: 중급~고급 (GA4, GTM, Chrome DevTools, SQL 능숙)
- **소속**: Digital Marketing 조직 산하
- **업무 시간**: 정규직, 주 40시간

**현재 행동 및 워크플로우:**

1. **주간 수동 검증 루틴**
   - 월요일: 주요 10개 이커머스 사이트 점검 (각 15-20분, 총 3시간)
   - 화요일: 글로벌 D2C 10개 사이트 점검 (3시간)
   - 수요일: 브랜드 사이트 점검 (3시간)
   - 목요일-금요일: 이슈 대응 및 보고서 작성

2. **검증 프로세스**
   ```
   1. CSV 파일에서 속성 정보 확인
   2. 브라우저로 사이트 방문
   3. Chrome DevTools → Network 탭 열기
   4. 페이지 새로고침하여 GA4 이벤트 캡처
   5. analytics.google.com/g/collect 요청 찾기
   6. 측정 ID 수동 확인
   7. GTM 디버거로 GTM ID 확인
   8. 스프레드시트에 결과 기록
   ```

3. **이슈 발견 시**
   - 담당 개발팀에 Slack으로 수동 알림
   - 스크린샷 수동 캡처 및 공유
   - JIRA 티켓 수동 생성
   - 이슈 해결까지 일일 follow-up

**구체적인 니즈와 Pain Points:**

**Pain Point 1: 반복 작업의 피로감**
- "매주 똑같은 작업을 100번 반복하는 느낌. 로봇이 된 기분."
- "클릭, 새로고침, 확인, 기록... 이걸 하루 종일 하면 집중력이 떨어진다."
- **니즈**: 반복 작업 자동화로 전략적 분석 업무에 집중

**Pain Point 2: 놓칠 수 있는 공포**
- "100개 중에 하나라도 놓치면 큰 문제가 될 수 있다."
- "휴가 가면 검증이 2주 밀리는데, 그 사이에 문제 생기면 어쩌나 불안하다."
- **니즈**: 자동화로 100% 커버리지 보장 및 휴가 시에도 안심

**Pain Point 3: 사후 대응의 한계**
- "문제를 2주 후에 발견하면 이미 늦었다. 데이터는 복구 불가."
- "긴급 배포 후 즉시 확인하고 싶은데, 수동으로는 현실적으로 불가능."
- **니즈**: 24시간 내 문제 감지로 빠른 대응 가능

**Pain Point 4: 증거 부족**
- "이슈 보고 시 '언제부터 잘못됐는지' 증명하기 어렵다."
- "스크린샷을 항상 찍어놓는 게 아니라서, 나중에 재현이 안 될 때가 있다."
- **니즈**: 자동 스크린샷 및 히스토리 추적

**달성하려는 목표:**

1. **운영 효율성**: 수동 검증 시간 80% 이상 절감 (주 15시간 → 3시간)
2. **데이터 신뢰성**: 모든 속성 100% 커버리지, 24시간 내 문제 감지
3. **전략적 업무**: 단순 검증 대신 트렌드 분석, 인사이트 도출에 시간 투자
4. **업무 만족도**: 반복 작업 스트레스 감소, 더 의미 있는 업무 수행

### Secondary User Segment: 마케팅 운영팀 및 브랜드 매니저

**프로필:**
- **팀 규모**: 약 15-20명 (각 브랜드별 1-2명)
- **역할**: 브랜드별 디지털 마케팅 캠페인 기획 및 실행, 성과 모니터링
- **기술 수준**: 초급~중급 (GA4 보고서 읽기는 가능하나 GTM 설정은 어려움)
- **소속**: 각 브랜드 마케팅 조직
- **업무 시간**: 정규직, 주 40-50시간 (캠페인 기간 중 야근 빈번)

**현재 행동 및 워크플로우:**

1. **일일 대시보드 확인**
   - 오전 9시: GA4 대시보드 접속
   - 전일 트래픽, 전환율, 매출 확인
   - 이상 수치 발견 시 애널리틱스 팀에 문의

2. **캠페인 성과 분석**
   - 주간 캠페인 성과 보고서 작성
   - GA4 데이터 기반 ROI 계산
   - 경영진 보고 자료 준비

3. **문제 발생 시**
   - "왜 데이터가 안 들어오나요?" → 애널리틱스 팀에 문의
   - 답변 대기 (1-3일)
   - 그 사이 보고서 작성 지연

**구체적인 니즈와 Pain Points:**

**Pain Point 1: 데이터 신뢰성 불안**
- "보고서를 작성했는데, 나중에 데이터가 잘못되었다고 하면 난감하다."
- "경영진에게 보고한 숫자가 틀렸다면 신뢰도가 떨어진다."
- **니즈**: 데이터가 정상적으로 수집되고 있다는 확신

**Pain Point 2: 문제 발견 지연**
- "캠페인 끝나고 나서 데이터가 안 들어왔다는 걸 알게 되면 헛수고."
- "A/B 테스트 결과를 믿고 결정했는데, 추적이 안 되고 있었다면?"
- **니즈**: 문제 발생 시 즉시 알림 받아서 캠페인 조정 가능

**Pain Point 3: 기술팀 의존성**
- "뭔가 이상한 것 같은데, 기술적으로 확인할 방법이 없다."
- "애널리틱스 팀이 바쁘면 답변이 늦어진다."
- **니즈**: 비기술 사용자도 이해할 수 있는 명확한 상태 표시 (OK/NOT OK)

**달성하려는 목표:**

1. **신뢰성 확보**: 캠페인 데이터가 100% 정확하게 수집되고 있다는 확신
2. **빠른 의사결정**: 문제 조기 발견으로 캠페인 즉시 조정 가능
3. **자율성**: 기술팀 의존 없이 기본적인 상태 확인 가능
4. **업무 효율**: 데이터 오류로 인한 보고서 재작업 최소화

---

## Goals & Success Metrics

### Business Objectives

- **데이터 손실 방지를 통한 ROI 개선**: 연간 $200K 상당의 데이터 손실을 방지하여 마케팅 ROI 측정 정확도를 95% 이상 유지 (2025년 Q2까지 달성)

- **운영 효율성 향상**: 디지털 애널리틱스 팀의 수동 검증 시간을 주 15시간에서 3시간으로 80% 절감하여, 절감된 12시간을 전략적 분석 및 인사이트 도출에 재투자 (2025년 Q1까지 달성)

- **비용 절감**: 상용 모니터링 솔루션 대비 3년간 $60K 이상 절감 (상용 도구 $25K/년 × 3년 = $75K vs. 자체 개발 $15K 초기 투자 + $1.5K 운영비용)

- **글로벌 확장 대비**: 2025년 30% 속성 증가 예상 시나리오에서도 추가 인력 채용 없이 현재 팀 구성으로 모니터링 가능한 확장성 확보 (2025년 Q4까지 검증)

- **데이터 품질 신뢰도 향상**: 마케팅 팀의 GA4 데이터 신뢰도를 현재 60%에서 90% 이상으로 향상 (분기별 설문조사 측정, 2025년 Q3까지 달성)

### User Success Metrics

- **일일 모니터링 커버리지**: 100개 이상 속성의 100% 커버리지 달성, 일 0건의 미검증 속성 유지

- **문제 발견 시간 단축**: 평균 이슈 발견 시간을 현재 2-4주에서 24시간 이내로 단축 (95% 이상의 이슈가 24시간 내 탐지)

- **사용자 만족도**: 디지털 애널리틱스 팀의 시스템 만족도 4.5/5.0 이상 (분기별 NPS 측정)

- **알림 정확도**: False positive rate 5% 이하 유지 (실제 문제가 아닌데 알림이 발생하는 비율)

- **히스토리 접근성**: 과거 30일 검증 데이터 100% 보관 및 3초 이내 조회 가능

- **셀프 서비스 비율**: 마케팅 팀이 애널리틱스 팀 도움 없이 자체 해결하는 비율 40% 이상 (현재 0% → 6개월 내 40%)

### Key Performance Indicators (KPIs)

**운영 KPI:**

- **시스템 가용성**: 99.5% 이상 (월 최대 3.6시간 다운타임 허용)
  - 측정 방법: cron job 실행 로그 및 모니터링 시스템 헬스체크
  - 목표: 매일 새벽 3시 실행, 실패 시 즉시 Slack 알림

- **검증 완료 시간**: 100개 속성 전체 검증을 2시간 이내 완료
  - 측정 방법: 시작 타임스탬프 ~ 완료 타임스탬프
  - 목표: 5개 병렬 브라우저로 평균 1.5시간 달성

- **이슈 탐지율**: 실제 발생한 설정 오류의 95% 이상 자동 탐지
  - 측정 방법: 수동 검증과 자동 검증 결과 비교 (월 1회 샘플 검증)
  - 목표: False negative rate 5% 이하

**비즈니스 영향 KPI:**

- **데이터 손실 사고 감소**: 분기당 major incidents 2-3건 → 0-1건
  - 정의: 2주 이상 데이터 미수집 또는 $10K 이상 광고비 영향
  - 측정: 분기별 사고 보고서 집계

- **평균 복구 시간 (MTTR)**: 이슈 탐지 후 24시간 이내 해결 비율 80% 이상
  - 측정: 알림 발송 시간 ~ JIRA 티켓 Close 시간
  - 목표: Critical 이슈는 4시간 이내, High는 24시간 이내

- **팀 생산성**: 애널리틱스 팀의 전략적 업무(분석, 인사이트) 비중 40% → 70% 증가
  - 측정: 주간 업무 시간 트래킹 (수동 검증 vs. 분석 업무)
  - 목표: 6개월 내 70% 달성

**품질 KPI:**

- **측정 ID 검증 정확도**: 100% (오탐 0건)
  - 측정: CSV 기대값 vs. 실제 캡처값 일치도

- **GTM ID 검증 정확도**: 100% (오탐 0건)
  - 측정: CSV 기대값 vs. 실제 캡처값 일치도

- **page_view 이벤트 감지율**: 정상 사이트의 99% 이상에서 page_view 이벤트 캡처 성공
  - 측정: 캡처된 GA4 이벤트 중 page_view 존재 여부
  - 목표: 99% 이상 (1% 미만은 사이트 자체 문제로 허용)

---

## MVP Scope

### Core Features (Must Have)

- **CSV 기반 속성 관리**: CSV 파일에서 속성 메타데이터(측정 ID, GTM ID, URL, whitelist) 자동 로드 및 파싱. 새 속성 추가는 CSV 업데이트만으로 즉시 반영.
  - **근거**: 기존 Amorepacific 워크플로우와 완벽 통합, 별도 UI 개발 불필요로 개발 기간 단축

- **자동 일일 크롤링 (100개 속성)**: cron job으로 매일 새벽 3시 자동 실행, Playwright 기반 브라우저 5개 병렬 처리로 1-2시간 내 전체 속성 검증 완료.
  - **근거**: 24시간 내 문제 감지를 위한 핵심 기능, PoC에서 검증 완료

- **GA4/GTM 설정 검증**: Chrome DevTools Protocol로 네트워크 이벤트 캡처, 측정 ID/GTM ID/page_view 이벤트 자동 검증, CSV 기대값과 비교하여 이슈 자동 탐지.
  - **근거**: 데이터 손실 방지의 핵심 로직, 사용자의 최우선 니즈

- **결과 저장 (스크린샷 + JSON)**: 날짜별 폴더 구조로 fullPage 스크린샷 및 검증 결과 JSON 저장, 30일 히스토리 보관 정책.
  - **근거**: 증거 기반 검증 및 과거 추적을 위한 필수 기능

- **Slack 알림 (이슈 발견 시)**: 검증 실패 시 Slack 채널로 자동 알림 발송, 속성명, 이슈 유형, 스크린샷 링크 포함.
  - **근거**: 즉각적인 문제 인지 및 대응을 위한 핵심 기능

### Out of Scope for MVP

- 웹 대시보드 UI (Phase 2에서 추가)
- JIRA 티켓 자동 생성 (Phase 2에서 추가)
- Email 알림 (Slack만으로 충분, 필요 시 Phase 2)
- AI 기반 이상 탐지 (장기 비전)
- 모바일 앱 검증 (웹 속성만 우선, 앱은 Phase 3)
- 실시간 모니터링 (일일 배치로 충분)
- 사용자 인증/권한 관리 (내부 시스템이므로 불필요)
- 커스텀 검증 규칙 설정 UI (하드코딩으로 시작, Phase 3에서 추가)

### MVP Success Criteria

**MVP는 다음 조건을 모두 충족해야 성공으로 간주됩니다:**

1. **기능적 성공**: 100개 속성 대상 7일 연속 무중단 자동 검증 완료
2. **성능 성공**: 전체 검증 시간 평균 2시간 이하 유지
3. **품질 성공**: 알려진 설정 오류 5건을 100% 탐지 (False negative 0건)
4. **사용자 수용**: 디지털 애널리틱스 팀의 만족도 4.0/5.0 이상
5. **비즈니스 영향**: Phase 1 완료 후 1개월 내 실제 이슈 1건 이상 조기 발견 (기존 2-4주 발견 대비)

---

## Post-MVP Vision

### Phase 2 Features (3-6개월)

- **웹 대시보드**: 검증 결과 시각화, 30일 히스토리 그래프, 속성별 상태 필터링
- **트렌드 분석**: 반복 실패 속성 자동 식별, 주간/월간 리포트 자동 생성
- **JIRA 통합**: 이슈 발견 시 JIRA 티켓 자동 생성, 담당자 자동 할당
- **Email 알림**: Slack 외에 Email 알림 옵션 추가
- **알림 규칙 커스터마이징**: 속성별, 이슈 타입별 알림 수신자 설정

### Long-term Vision (1-2년)

- **예측 알림**: 설정 변경 패턴 학습 후 예상 이슈 사전 경고
- **멀티 클라우드 실행**: AWS/GCP 동시 실행으로 지리적 분산 검증
- **AI 이상 탐지**: 정상 패턴 학습 후 anomaly 자동 발견
- **셀프 서비스 플랫폼**: 마케팅 팀이 직접 속성 추가, 검증 규칙 설정, 알림 관리
- **모바일 앱 지원**: Android/iOS 앱 GA4 검증 확장
- **다국어 지원**: 일본, 중국 시장 담당자를 위한 일본어/중국어 인터페이스

### Expansion Opportunities

- **다른 애널리틱스 플랫폼 지원**: Adobe Analytics, Mixpanel 등으로 확장
- **타 기업 SaaS 제품화**: Amorepacific 검증 후 외부 판매 검토
- **업계 표준화 기여**: 오픈소스 공개로 GA4 검증 표준 확립

---

## Technical Considerations

### Platform Requirements

- **Target Platforms**: Server-side (Node.js 런타임)
- **Browser/OS Support**: Chromium 브라우저 (Playwright 제공), Linux 서버 환경
- **Performance Requirements**:
  - 100개 속성 2시간 내 검증 완료
  - 5개 concurrent 브라우저 동시 실행
  - 메모리 사용량: 브라우저당 최대 500MB, 총 3GB 이하

### Technology Preferences

- **Frontend**: 없음 (MVP는 CLI 기반, Phase 2에서 React 대시보드 추가 예정)
- **Backend**: Node.js 18+ (ES Modules), Playwright, csv-parser, Chrome DevTools Protocol
- **Database**: 없음 (파일 기반 저장, Phase 2에서 PostgreSQL 검토)
- **Hosting/Infrastructure**:
  - 사내 Linux 서버 또는 AWS EC2 (t3.medium)
  - cron job 스케줄러
  - Slack Webhook API

### Architecture Considerations

- **Repository Structure**: Monorepo (7개 모듈: orchestrator, browserPool, networkCapture, propertyResolver, validator, storage, columnNames)
- **Service Architecture**: Standalone Node.js 애플리케이션 (no microservices for MVP)
- **Integration Requirements**:
  - CSV 파일 읽기 (로컬 파일 시스템)
  - Slack Webhook (HTTPS POST)
  - Chrome DevTools Protocol (Playwright)
- **Security/Compliance**:
  - 사내 네트워크 내부 실행 (외부 노출 불필요)
  - 스크린샷 내 민감 정보 포함 가능 → 저장 폴더 접근 권한 제한
  - GDPR/CCPA 관련 개인정보 수집 없음 (기술 설정만 검증)

---

## Constraints & Assumptions

### Constraints

- **Budget**: 초기 개발 비용 $15K (개발자 인건비 200시간 × $75/시간), 연간 운영 비용 $1.5K (서버 $500 + 유지보수 $1K)
- **Timeline**: MVP 개발 8주 (Phase 1: 2주, Phase 2: 3주, Phase 3: 2주, 테스트 1주)
- **Resources**: 개발자 1명 (풀타임 8주), 애널리틱스 팀 1명 (테스트 지원 주 5시간)
- **Technical**:
  - 사내 Linux 서버 사용 (신규 서버 구매 불가)
  - Playwright가 지원하지 않는 브라우저는 검증 불가 (IE11 등)
  - Bot detection에 막히는 사이트는 수동 화이트리스트 관리 필요

### Key Assumptions

- CSV 파일 포맷이 변경되지 않음 (변경 시 파서 업데이트 필요)
- 100개 속성 모두 Playwright 브라우저로 접근 가능 (VPN/방화벽 문제 없음)
- GA4/GTM 스크립트 구조가 크게 변경되지 않음 (Google 정책 변경 리스크)
- Slack Webhook이 계속 사용 가능 (Slack 정책 변경 리스크 낮음)
- 개발 기간 중 애널리틱스 팀의 테스트 지원 가능
- 사내 서버 리소스 충분 (CPU 4 core, RAM 8GB 이상)

---

## Risks & Open Questions

### Key Risks

- **Bot Detection 차단**: 일부 사이트에서 Playwright를 bot으로 탐지하여 접근 차단 가능
  - **영향도**: High (검증 불가 속성 발생)
  - **대응**: Playwright stealth mode 적용, User-Agent 랜덤화, 필요 시 수동 화이트리스트 관리

- **GA4/GTM 스크립트 변경**: Google이 GA4/GTM 구조 변경 시 캡처 로직 무효화
  - **영향도**: Medium (일시적 검증 실패)
  - **대응**: 월 1회 Google 공식 문서 모니터링, 변경 감지 시 즉시 업데이트

- **CSV 파일 관리 실수**: 담당자가 CSV 파일을 잘못 수정하여 검증 오류 발생
  - **영향도**: Medium (일시적 오탐)
  - **대응**: CSV 파일 버전 관리 (Git), 변경 전 validation script 실행

- **서버 다운타임**: 사내 서버 장애 시 검증 중단
  - **영향도**: Low (새벽 시간대 실행으로 영향 최소)
  - **대응**: 실행 실패 시 Slack 알림, 복구 후 재실행 가능하도록 idempotent 설계

- **False Positive 증가**: 네트워크 타임아웃, 일시적 사이트 다운 등으로 오탐 증가
  - **영향도**: Medium (사용자 신뢰도 저하)
  - **대응**: 재시도 로직 (3회), 타임아웃 임계값 조정, 연속 2일 실패 시에만 알림

### Open Questions

- Slack 알림 수신 채널은 어디인가? (#digital-analytics 채널?)
- 스크린샷 저장 폴더 접근 권한은 누구에게 부여하나? (애널리틱스 팀만?)
- 30일 이후 히스토리는 완전 삭제인가, 아카이빙인가?
- Phase 2 대시보드는 React로 개발할 것인가, 다른 프레임워크인가?
- 모바일 앱 검증은 언제부터 필요한가? (우선순위 낮음?)

### Areas Needing Further Research

- Playwright stealth mode의 실제 효과 검증 (100개 속성 중 몇 개가 차단되나?)
- 사내 서버의 실제 리소스 여유 확인 (현재 CPU/메모리 사용률은?)
- GA4 이벤트 캡처 시 네트워크 타임아웃 최적값 찾기 (현재 8초가 적절한가?)
- CSV 파일 관리 프로세스 표준화 (누가 언제 어떻게 업데이트하나?)

---

## Next Steps

### Immediate Actions

1. **이해관계자 승인**: 이 Project Brief를 디지털 애널리틱스 팀 리더, IT 팀 리더에게 공유하여 피드백 수렴 (1주 이내)
2. **리소스 확보**: 개발자 1명 8주 할당 승인, 사내 서버 리소스 확보 확인 (1주 이내)
3. **PRD 작성 시작**: Product Manager와 함께 상세 요구사항 문서 작성 (2주 이내)
4. **기술 아키텍처 설계**: 기존 PoC 시스템 분석 및 프로덕션 아키텍처 설계 (2주 이내)

### PM Handoff

이 Project Brief는 **GA4 Tech Issue Catcher** 프로젝트의 전체 맥락을 제공합니다.

**다음 단계로 PRD 작성을 시작해주세요:**
- Brief를 철저히 검토하여 불명확한 부분 질문
- 사용자 스토리 및 상세 기능 명세 작성
- 개발 우선순위 및 스프린트 계획 수립
- 기술팀과 협력하여 Architecture 문서 작성

---

**Project Brief 작성 완료 일시**: 2025-10-29

